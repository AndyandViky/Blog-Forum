<h1>nestjs学习（四）</h1><ol><li><p>Guards&gt;确定请求是否应由路由处理程序处理,在每个中间件之后执行，但在任何pipe之前执行。</p><ul><li><p>Authorization guard</p></li><li><p>Role-based authentication</p><pre><code>import { Injectable, CanActivate, ExecutionContext } from &#39;@nestjs/common&#39;;import { Observable } from &#39;rxjs&#39;;@Injectable()export class RolesGuard implements CanActivate {canActivate(context: ExecutionContext,): boolean | Promise&lt;boolean&gt; | Observable&lt;boolean&gt; {return true;}}</code></pre></li></ul></li><li><p>Interceptors 拦截器</p><ul><li>功能<ul><li>在方法执行之前/之后绑定额外的逻辑</li><li>转换函数返回的结果</li><li>转换从函数抛出的异常</li><li>扩展基本函数行为</li><li>根据所选条件完全覆盖函数（例如缓存目的）</li></ul></li><li><p>拦截示例</p><pre><code>import { Injectable, NestInterceptor, ExecutionContext } from &#39;@nestjs/common&#39;;export class ApplicationModule {}</p></li></ul></li><li><p>自定义路由装饰器</p><pre><code>import { createParamDecorator } from &#39;@nestjs/common&#39;;export const User = createParamDecorator((data, req) =&gt; {return req.user;});</code></pre><p><img alt="大致流程图" src="https://img-blog.csdnimg.cn/20190223160207666.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0FuZHlWaWt5,size_16,color_FFFFFF,t_70"/></p></li></ol>